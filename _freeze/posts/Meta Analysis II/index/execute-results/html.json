{
  "hash": "b9fa04fceaeeaa6912561ed79553c96d",
  "result": {
    "markdown": "---\ntitle: \"Meta-Analysis II: Subgroup Analysis \"\nformat: \n  revealjs:\n    theme: league\n    transition: slide\n    background-transition: zoom\n    slide-number: c/t\n    show-slide-number: all\n    chalkboard: true\n    background-size: cover\n    smaller: true\n    echo: true\n    code-fold: true\n    code-summary: \"Show the code\"\nauthor: \"Dr Lazaros Gonidis\"\ndate: \"2024-03-22\"\nimage: \"image1.jpg\"\n---\n\n\n## metafor diagram\n\n![](metafor.JPG)\n\n## Lets work through an example\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(metafor)\nlibrary(metadat)\n\ndf <- get(data(dat.molloy2014))\n\nhead(df)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n              authors year  ni    ri controls          design   a_measure\n1     Axelsson et al. 2009 109 0.187     none cross-sectional self-report\n2     Axelsson et al. 2011 749 0.162     none cross-sectional self-report\n3        Bruce et al. 2010  55 0.340     none     prospective       other\n4  Christensen et al. 1999 107 0.320     none cross-sectional self-report\n5 Christensen & Smith 1995  72 0.270     none     prospective       other\n6        Cohen et al. 2004  65 0.000     none     prospective       other\n  c_measure meanage quality\n1     other   22.00       1\n2       NEO   53.59       1\n3       NEO   43.36       2\n4     other   41.70       1\n5       NEO   46.39       2\n6       NEO   41.20       2\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndf <- escalc(measure = \"ZCOR\", ri=ri, ni=ni, data=df, slab = paste(authors, year, sep=\",\"))\nma.res <- rma(yi, vi, data=df)\nma.res\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nRandom-Effects Model (k = 16; tau^2 estimator: REML)\n\ntau^2 (estimated amount of total heterogeneity): 0.0081 (SE = 0.0055)\ntau (square root of estimated tau^2 value):      0.0901\nI^2 (total heterogeneity / total variability):   61.73%\nH^2 (total variability / sampling variability):  2.61\n\nTest for Heterogeneity:\nQ(df = 15) = 38.1595, p-val = 0.0009\n\nModel Results:\n\nestimate      se    zval    pval   ci.lb   ci.ub      \n  0.1499  0.0316  4.7501  <.0001  0.0881  0.2118  *** \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npredict(ma.res)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n   pred     se  ci.lb  ci.ub   pi.lb  pi.ub \n 0.1499 0.0316 0.0881 0.2118 -0.0371 0.3370 \n```\n:::\n\n```{.r .cell-code}\nconfint(ma.res)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n       estimate   ci.lb   ci.ub \ntau^2    0.0081  0.0017  0.0378 \ntau      0.0901  0.0412  0.1944 \nI^2(%)  61.7324 25.2799 88.2545 \nH^2      2.6132  1.3383  8.5139 \n```\n:::\n:::\n\n\n## Exploring for influential studies\n\n\n::: {.cell}\n\n```{.r .cell-code}\nma.inf <- influence(ma.res)\nprint(ma.inf)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n                         rstudent  dffits cook.d  cov.r tau2.del  QE.del    hat \nAxelsson et al.,2009       0.2918  0.0485 0.0025 1.1331   0.0091 37.7109 0.0568 \nAxelsson et al.,2011       0.1196 -0.0031 0.0000 1.2595   0.0100 36.7672 0.1054 \nBruce et al.,2010          1.2740  0.2595 0.0660 0.9942   0.0075 35.3930 0.0364 \nChristensen et al.,1999    1.4711  0.3946 0.1439 0.9544   0.0068 33.5886 0.0562 \nChristensen & Smith,1995   0.8622  0.1838 0.0339 1.0505   0.0082 36.5396 0.0441 \nCohen et al.,2004         -0.9795 -0.2121 0.0455 1.0639   0.0084 37.1703 0.0411 \nDobbels et al.,2005        0.2177  0.0296 0.0010 1.1740   0.0094 37.6797 0.0714 \nEdiger et al.,2007        -0.9774 -0.3120 0.1001 1.1215   0.0084 36.1484 0.0889 \nInsel et al.,2006          0.7264  0.1392 0.0195 1.0561   0.0083 37.0495 0.0379 \nJerant et al.,2011        -1.8667 -0.5861 0.2198 0.8502   0.0047 25.0661 0.1058 \nMoran et al.,1997         -1.4985 -0.2771 0.0756 1.0073   0.0077 35.6617 0.0369 \nO'Cleirigh et al.,2007     1.8776  0.4918 0.2148 0.8819   0.0059 31.9021 0.0511 \nPenedo et al.,2003        -1.1892 -0.2939 0.0859 1.0550   0.0080 36.3291 0.0587 \nQuine et al.,2012         -0.0020 -0.0423 0.0021 1.2524   0.0100 37.7339 0.0998 \nStilley et al.,2004        0.8066  0.2126 0.0459 1.0907   0.0083 35.8385 0.0684 \nWiebe & Christensen,1997  -0.7160 -0.1656 0.0280 1.0853   0.0087 37.7017 0.0411 \n                          weight    dfbs inf \nAxelsson et al.,2009      5.6776  0.0481     \nAxelsson et al.,2011     10.5396 -0.0032     \nBruce et al.,2010         3.6432  0.2623     \nChristensen et al.,1999   5.6195  0.3994     \nChristensen & Smith,1995  4.4069  0.1837     \nCohen et al.,2004         4.1094 -0.2112     \nDobbels et al.,2005       7.1362  0.0296     \nEdiger et al.,2007        8.8886 -0.3128     \nInsel et al.,2006         3.7886  0.1387     \nJerant et al.,2011       10.5826 -0.5430     \nMoran et al.,1997         3.6922 -0.2791     \nO'Cleirigh et al.,2007    5.1150  0.5059     \nPenedo et al.,2003        5.8732 -0.2941     \nQuine et al.,2012         9.9778 -0.0434     \nStilley et al.,2004       6.8403  0.2125     \nWiebe & Christensen,1997  4.1094 -0.1642     \n```\n:::\n:::\n\n\n## Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(ma.inf)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n## Forest Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nforest(ma.res)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nforest(ma.res, addpred = TRUE, header = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nforest(ma.res, header = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-8-1.png){width=960}\n:::\n:::\n\n\n## Funnel Plot\n\nPlease be aware that these are not publication bias tests!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfunnel(ma.res, las=3, digits = list(2L,2))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n## Small Study Bias\n\n\n::: {.cell}\n\n```{.r .cell-code}\nregtest(ma.res)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nRegression Test for Funnel Plot Asymmetry\n\nModel:     mixed-effects meta-regression model\nPredictor: standard error\n\nTest for Funnel Plot Asymmetry: z = 1.0216, p = 0.3070\nLimit Estimate (as sei -> 0):   b = 0.0790 (CI: -0.0686, 0.2266)\n```\n:::\n:::\n\n\n## Adding a moderator\n\n\n::: {.cell}\n\n```{.r .cell-code}\nma.res1 <- rma(yi, vi, data=df, mods = ~factor(design))\nma.res1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nMixed-Effects Model (k = 16; tau^2 estimator: REML)\n\ntau^2 (estimated amount of residual heterogeneity):     0.0090 (SE = 0.0062)\ntau (square root of estimated tau^2 value):             0.0946\nI^2 (residual heterogeneity / unaccounted variability): 61.47%\nH^2 (unaccounted variability / sampling variability):   2.60\nR^2 (amount of heterogeneity accounted for):            0.00%\n\nTest for Residual Heterogeneity:\nQE(df = 14) = 34.8274, p-val = 0.0016\n\nTest of Moderators (coefficient 2):\nQM(df = 1) = 0.1911, p-val = 0.6620\n\nModel Results:\n\n                           estimate      se     zval    pval    ci.lb   ci.ub \nintrcpt                      0.1701  0.0551   3.0858  0.0020   0.0621  0.2781 \nfactor(design)prospective   -0.0298  0.0682  -0.4372  0.6620  -0.1636  0.1039 \n                              \nintrcpt                    ** \nfactor(design)prospective     \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nforest(ma.res1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n\n## Adding a second moderator\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf2 <- escalc(measure = \"ZCOR\", ri=ri, ni=ni, data=df, slab = paste(authors, year, sep=\",\"))\n\ndf2 <- df[order(df$yi,df$a_measure),] \n\nma.res2 <- rma(yi, vi, data=df2, mods = ~factor(a_measure)+meanage)\nma.res2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nMixed-Effects Model (k = 16; tau^2 estimator: REML)\n\ntau^2 (estimated amount of residual heterogeneity):     0.0085 (SE = 0.0063)\ntau (square root of estimated tau^2 value):             0.0924\nI^2 (residual heterogeneity / unaccounted variability): 58.84%\nH^2 (unaccounted variability / sampling variability):   2.43\nR^2 (amount of heterogeneity accounted for):            0.00%\n\nTest for Residual Heterogeneity:\nQE(df = 13) = 29.7360, p-val = 0.0051\n\nTest of Moderators (coefficients 2:3):\nQM(df = 2) = 1.3179, p-val = 0.5174\n\nModel Results:\n\n                              estimate      se     zval    pval    ci.lb \nintrcpt                         0.2511  0.1428   1.7576  0.0788  -0.0289 \nfactor(a_measure)self-report    0.0183  0.0701   0.2609  0.7942  -0.1191 \nmeanage                        -0.0022  0.0023  -0.9405  0.3470  -0.0066 \n                               ci.ub    \nintrcpt                       0.5310  . \nfactor(a_measure)self-report  0.1557    \nmeanage                       0.0023    \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n\n```{.r .cell-code}\nforest(ma.res2)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n\n## Ordered by year of publication\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf3 <- escalc(measure = \"ZCOR\", ri=ri, ni=ni, data=df, slab = paste(authors, year, sep=\",\"))\n\ndf3 <- df3[order(df3$year),] \n\nma.res3 <- rma(yi, vi, data=df3)\nma.res3\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nRandom-Effects Model (k = 16; tau^2 estimator: REML)\n\ntau^2 (estimated amount of total heterogeneity): 0.0081 (SE = 0.0055)\ntau (square root of estimated tau^2 value):      0.0901\nI^2 (total heterogeneity / total variability):   61.73%\nH^2 (total variability / sampling variability):  2.61\n\nTest for Heterogeneity:\nQ(df = 15) = 38.1595, p-val = 0.0009\n\nModel Results:\n\nestimate      se    zval    pval   ci.lb   ci.ub      \n  0.1499  0.0316  4.7501  <.0001  0.0881  0.2118  *** \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n:::\n\n```{.r .cell-code}\nforest(ma.res3, addpred = TRUE, header = TRUE)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n## Cumulative Forest Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nforest.cumul <- cumul(ma.res3, order = order(df3$year))\nforest(forest.cumul)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-15-1.png){width=960}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}